<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Codavatar InternTrack - Forgot Password</title>
  <link rel="stylesheet" href="css/style.css" />
</head>
<body>
  <div class="container">
    <div class="card">
      <div class="brand">
        <div>
          <h1>Forgot Password</h1>
          <small>Open your webmail to reset your password</small>
        </div>
        <button class="toggle" type="button" onclick="toggleTheme()">üåô/‚òÄÔ∏è Theme</button>
      </div>

      <div id="msg" class="msg"></div>

      <form id="form" class="form">
        <div class="field">
          <label for="email">Email</label>
          <input id="email" type="email" placeholder="you@codavatar.com" required />
        </div>

        <button id="sendBtn" class="btn" type="button">Continue</button>

        <div class="footer">
          <a class="small-link" href="login.html">Back to login</a>
        </div>
      </form>
    </div>
  </div>

  <script src="js/theme.js"></script>
  <script src="js/auth.js"></script>
  <script>
    initTheme();
    const msg = document.getElementById("msg");
    const form = document.getElementById("form");
    const sendBtn = document.getElementById("sendBtn");

    bindEnterToSubmit(form, sendBtn);

    function goWebmail() {
      const url = "https://webmail.migadu.com/";
      showMsg(msg, "Please check your email in Migadu Webmail for the reset link.", "ok");
      setTimeout(() => window.location.href = url, 1200);
    }

    function sendReset() {
      // You requested redirect behavior instead of API request
      const email = document.getElementById("email").value.trim().toLowerCase();
      if (!email) {
        showMsg(msg, "Please enter your email.", "err");
        return;
      }
      goWebmail();
    }

    sendBtn.addEventListener("click", sendReset);
  </script>
</body>
</html>
